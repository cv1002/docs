# 后台系统可用性挑战

## 架构

- 冗余架构
  - 多实例
  - 多机房
  - 多可用区
  - 多中心
  - 异地多活
- 故障转移
  - 负载均衡
  - API网关故障转移
  - 客户端故障转移
  - 重试退避
- 稳定性策略
  - 限流
  - 熔断
  - 降级
    - 页面降级 非核心页面模块，占用紧张资源，关停该页面，减少访问
    - 服务降级 非核心服务，关停
    - 依赖降级 非核心依赖，关停
    - 读写降级 直接读写数据库切为读写缓存，对于缓存依旧可以备份冗余
    - 延迟降级 页面异步加载，数据写入异步队列等
  - 削峰
  - 重试
  - 回滚
  - 冗余
- 性能优化
  - 服务性能
    - 缓存
    - 异步化
    - 并行
    - 代码优化
    - 池化
  - 存储性能
    - 技术选型
    - 配置优化
    - 分库分表
    - 读写分离
    - 慢查询优化
  - 机器性能
    - CPU
    - 内存
    - 磁盘IO
  - 链路优化
    - 静态化
    - CDN
    - 协议
    - 长连接

## 工具

- 混沌工程
  - 容灾演练
- 全链路压测
  - 容量评估
  - 瓶颈定位
  - 性能优化
  - 动态扩缩容
- 问题定位
  - 一站式定位工具

## 可观测性

- Logging
  - 远程日志
  - 染色日志
  - 日志告警
- Metrics
  - 服务监控
  - 存储监控
  - 机器监控
  - 实时告警
  - 大盘监控
  - 拨测
- Tracing
  - 链路追踪
  - 事务追踪
  - 故障溯源
- Profile
  - 性能分析

## 流程

- 例行压测
- 值班机制
- 告警跟进
- 巡检
- 研发流程
  - 代码CR
  - 自动化测试
  - 发布审批
- 故障演练